# ============================================================================
# Sortify AI Assistant - Environment Configuration Template
# ============================================================================
# 使用說明：
# 1. 複製此文件為 .env: cp example.env .env
# 2. 填入實際的配置值（特別是標記為 [必需] 的項目）
# 3. 不要將 .env 文件提交到版本控制系統
# ============================================================================

# ============================================================================
# 應用基本設定
# ============================================================================
APP_NAME=Sortify AI Assistant Backend
DEBUG=False

# ============================================================================
# 資料庫配置
# ============================================================================

# MongoDB 配置 [必需]
# 本地開發範例: mongodb://localhost:27017
# MongoDB Atlas 範例: mongodb+srv://username:password@cluster.mongodb.net/
MONGODB_URL=mongodb://admin:password@localhost:27017
DB_NAME=sortify_db

# Redis 配置（用於對話緩存）
REDIS_URL=redis://localhost:6379
REDIS_CONVERSATION_TTL=3600
REDIS_ENABLED=True

# ============================================================================
# AI 服務配置
# ============================================================================

# Google Gemini API Key [如需使用 AI 功能則必需]
# 獲取方式: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=

# AI 模型設定
DEFAULT_AI_MODEL=gemini-1.5-flash
AI_TEMPERATURE=0.7
AI_TOP_P=1.0
AI_TOP_K=40
AI_MAX_OUTPUT_TOKENS=10000
AI_MAX_OUTPUT_TOKENS_IMAGE=4096
AI_MAX_INPUT_CHARS_TEXT_ANALYSIS=100000

# ============================================================================
# 向量資料庫配置 (ChromaDB)
# ============================================================================

VECTOR_DB_PATH=./data/chromadb

# Embedding 模型設定
# 注意：變數名稱為 EMBEDDING_MODEL，不是 EMBEDDING_MODEL_NAME
EMBEDDING_MODEL=paraphrase-multilingual-mpnet-base-v2
EMBEDDING_MAX_LENGTH=512
EMBEDDING_DEVICE=auto

# 向量搜索設定
VECTOR_SEARCH_TOP_K=10
VECTOR_SIMILARITY_THRESHOLD=0.5

# 文本分塊策略
VECTOR_CHUNK_SIZE=512
VECTOR_CHUNK_OVERLAP=50

# 兩階段混合檢索設定
VECTOR_SEARCH_STAGE1_TOP_K=10
VECTOR_SEARCH_STAGE2_TOP_K=5

# RRF 融合檢索設定
RRF_K_CONSTANT=60
# 注意: RRF_WEIGHTS 在 config.py 中定義為 dict，無需在此設置
# RRF_WEIGHTS={"summary": 2.0, "chunks": 1.0}

# ============================================================================
# 智能問答系統配置
# ============================================================================

# 問題分類器設定
QUESTION_CLASSIFIER_ENABLED=True
QUESTION_CLASSIFIER_MODEL=gemini-2.0-flash-exp
QUESTION_CLASSIFIER_CONFIDENCE_THRESHOLD=0.7

# 智能工作流設定
ENABLE_INTELLIGENT_ROUTING=True
AUTO_APPROVE_SIMPLE_QUERIES=True
ENABLE_GREETING_SHORTCUT=True
ENABLE_CHITCHAT_SHORTCUT=True

# ============================================================================
# 安全性配置
# ============================================================================

# JWT 密鑰 [必需且必須修改]
# 生成強密鑰: openssl rand -hex 32
# ⚠️ 警告：不要使用預設值，必須生成自己的密鑰！
SECRET_KEY=your-super-secret-and-long-random-string-generated-safely
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ============================================================================
# Google OAuth 配置（Gmail 整合功能）
# ============================================================================

# Google OAuth 憑證 [如需 Gmail 整合則必需]
# 設置步驟:
# 1. 前往 Google Cloud Console: https://console.cloud.google.com
# 2. 創建 OAuth 2.0 客戶端 ID
# 3. 設置授權重定向 URI: http://localhost:3000/auth/gmail-callback
# 4. 複製 Client ID 和 Client Secret 到下方
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/gmail-callback

# Gmail API 設定
# 注意: GMAIL_SCOPES 在 config.py 中定義為 list，無需在此設置
# GMAIL_SCOPES=["https://www.googleapis.com/auth/gmail.readonly"]
GMAIL_API_QUOTA_PER_USER=250

# ============================================================================
# 檔案上傳配置
# ============================================================================

UPLOAD_DIR=uploaded_files

# ============================================================================
# CORS 配置 [重要]
# ============================================================================

# 允許的前端來源
# 開發環境範例: ["http://localhost:3000","http://127.0.0.1:3000"]
# 生產環境範例: ["https://your-domain.com"]
# 注意：使用 JSON 陣列格式
ALLOWED_ORIGINS=["http://localhost:3000","http://127.0.0.1:3000"]