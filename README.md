[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/xu5546223/sortify)

# Sortify AI Assistant / Sortify AI æ™ºèƒ½åŠ©æ‰‹

[English](#english-version) | [ä¸­æ–‡](#chinese-version)

---

<a id="chinese-version"></a>

## ğŸ“– é …ç›®æ¦‚è¿°

Sortify AI Assistant æ˜¯ä¸€å€‹åŠŸèƒ½å¼·å¤§çš„æ™ºèƒ½æ–‡ä»¶åˆ†æå’Œå•ç­”ç³»çµ±ï¼ŒåŸºæ–¼å…ˆé€²çš„å‘é‡è³‡æ–™åº«å’Œå¤§å‹èªè¨€æ¨¡å‹æŠ€è¡“ã€‚ç³»çµ±èƒ½å¤ è‡ªå‹•æå–ã€åˆ†ææ–‡æª”å…§å®¹ï¼Œä¸¦æä¾›åŸºæ–¼æ–‡ä»¶å…§å®¹çš„æ™ºèƒ½å•ç­”æœå‹™ï¼Œç‚ºä½¿ç”¨è€…æä¾›é«˜æ•ˆä¸”ç²¾ç¢ºçš„æ–‡æª”ç†è§£å’Œäº¤äº’é«”é©—ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ“„ æ–‡ä»¶ç®¡ç†
- **å¤šæ ¼å¼æ”¯æ´**ï¼šPDFã€Wordã€Excelã€åœ–ç‰‡ã€Markdown ç­‰å¤šç¨®æ ¼å¼
- **æ™ºèƒ½åˆ†é¡**ï¼šAI è‡ªå‹•åˆ†ææ–‡ä»¶å…§å®¹ä¸¦å‹•æ…‹ç”Ÿæˆåˆ†é¡ï¼ˆå¯é‡ç½®é‡æ–°åˆ†é¡ï¼‰
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æ´æ‰¹é‡ä¸Šå‚³ã€åˆªé™¤ã€å‘é‡åŒ–
- **Gmail å°å…¥**ï¼šç›´æ¥å¾ Gmail å°å…¥éƒµä»¶ä½œç‚ºæ–‡æª”

### ğŸ¤– AI æ™ºèƒ½åˆ†æ
- **è‡ªå‹•æ–‡æœ¬æå–**ï¼šå¾å„ç¨®æ ¼å¼æ–‡ä»¶ä¸­æå–æ–‡æœ¬å…§å®¹
- **çµæ§‹åŒ–åˆ†æ**ï¼šæå–é—œéµä¿¡æ¯ï¼ˆé‡‘é¡ã€æ—¥æœŸã€äººåã€åœ°é»ç­‰ï¼‰
- **å‹•æ…‹æ¬„ä½è­˜åˆ¥**ï¼šAI è‡ªå‹•è­˜åˆ¥æ–‡æª”ç‰¹æœ‰çš„æ¬„ä½
- **æ™ºèƒ½æ‘˜è¦**ï¼šç”Ÿæˆæº–ç¢ºçš„æ–‡æª”æ‘˜è¦å’Œé—œéµè©

### ğŸ’¬ æ™ºèƒ½å•ç­”ç³»çµ±
- **æ„åœ–åˆ†é¡**ï¼šè‡ªå‹•è­˜åˆ¥å•é¡Œé¡å‹ï¼ˆå¯’æš„ã€æœç´¢ã€è©³ç´°æŸ¥è©¢ã€è¤‡é›œåˆ†æç­‰ï¼‰
- **å°è©±è¨˜æ†¶**ï¼šæ”¯æ´å¤šè¼ªå°è©±ï¼Œè¨˜ä½ä¸Šä¸‹æ–‡å’Œå·²æŸ¥è©¢çš„æ–‡æª”
- **MongoDB è©³ç´°æŸ¥è©¢**ï¼šé‡å°å·²çŸ¥æ–‡æª”åŸ·è¡Œç²¾ç¢ºæ•¸æ“šæå–
- **æ™ºèƒ½æ–‡æª”è­˜åˆ¥**ï¼š
  - æ”¯æ´ç·¨è™Ÿå¼•ç”¨ï¼ˆ"æ–‡æª”äº”"ã€"ç¬¬3å€‹æ–‡æª”"ï¼‰
  - æ”¯æ´å…§å®¹åŒ¹é…ï¼ˆ"å—æŠ•çš„ç½°å–®"ã€"2024å¹´çš„ç™¼ç¥¨"ï¼‰
  - æ”¯æ´å°è©±å¼•ç”¨ï¼ˆ"é‚£å¼µç™¼ç¥¨"ã€"é€™å€‹åˆç´„"ï¼‰
- **å·¥ä½œæµæ‰¹å‡†**ï¼šéœ€è¦æœç´¢æˆ–è©³ç´°æŸ¥è©¢æ™‚è«‹æ±‚ç”¨æˆ¶æ‰¹å‡†

### ğŸ” å‘é‡æœç´¢
- **æ··åˆæª¢ç´¢**ï¼šçµåˆæ‘˜è¦å‘é‡å’Œæ–‡æœ¬å¡Šå‘é‡çš„ RRF èåˆæœç´¢
- **æ™ºèƒ½è§¸ç™¼**ï¼šæ ¹æ“šç›¸ä¼¼åº¦è‡ªå‹•æ±ºå®šæ˜¯å¦éœ€è¦æŸ¥è©¢é‡å¯«
- **æŸ¥è©¢å„ªåŒ–**ï¼šAI è‡ªå‹•é‡å¯«æŸ¥è©¢ä»¥æé«˜æª¢ç´¢æº–ç¢ºåº¦
- **èªç¾©ç†è§£**ï¼šæ”¯æ´è‡ªç„¶èªè¨€æŸ¥è©¢å’Œæ¦‚å¿µåŒ¹é…

### ğŸ“Š æ•¸æ“šå¯è¦–åŒ–
- **å„€è¡¨æ¿**ï¼šç³»çµ±ç‹€æ…‹ã€æ–‡æª”çµ±è¨ˆã€æ´»å‹•è¨˜éŒ„
- **å•ç­”åˆ†æ**ï¼šæŸ¥çœ‹ AI è™•ç†éç¨‹ã€å‘é‡æœç´¢çµæœã€ä¸Šä¸‹æ–‡æ•¸æ“š
- **èšé¡çµ±è¨ˆ**ï¼šåˆ†é¡åˆ†å¸ƒã€æ–‡æª”æ•¸é‡ã€è¦†è“‹ç‡

### ğŸ” å®‰å…¨èˆ‡æ¬Šé™
- **ç”¨æˆ¶èªè­‰**ï¼šJWT Token èªè­‰
- **æ–‡æª”éš”é›¢**ï¼šæ¯å€‹ç”¨æˆ¶åªèƒ½è¨ªå•è‡ªå·±çš„æ–‡æª”
- **å®‰å…¨æ—¥èªŒ**ï¼šè¨˜éŒ„æ‰€æœ‰æ“ä½œå’ŒéŒ¯èª¤

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

**æŠ€è¡“æ£§:**

| çµ„ä»¶     | æŠ€è¡“                                           | æè¿°                       |
| -------- | ---------------------------------------------- | -------------------------- |
| å‰ç«¯     | React.js + TypeScript + Ant Design + TailwindCSS | ç¾ä»£åŒ–éŸ¿æ‡‰å¼ç”¨æˆ¶ç•Œé¢       |
| å¾Œç«¯     | FastAPI + UV (Python)                          | é«˜æ€§èƒ½ç•°æ­¥ API æœå‹™        |
| è³‡æ–™åº«   | MongoDB + ChromaDB                             | æ–‡æª”å­˜å„² + å‘é‡æœç´¢        |
| AI æœå‹™  | Google Gemini / OpenAI API                     | å¤§å‹èªè¨€æ¨¡å‹é›†æˆ           |

ä»¥ä¸‹æ˜¯æˆ‘å€‘ç³»çµ±çš„æ¶æ§‹åœ–ï¼š

![ç³»çµ±æ¶æ§‹åœ–](images/SystemArchitecture.jpg)

## ğŸ¯ æ™ºèƒ½å•ç­”ç³»çµ±äº®é»

### æ™ºèƒ½æ„åœ–è­˜åˆ¥
ç³»çµ±èƒ½è‡ªå‹•è­˜åˆ¥7ç¨®å•é¡Œé¡å‹ï¼Œä¸¦æ¡ç”¨æœ€å„ªç­–ç•¥è™•ç†ï¼š

1. **å¯’æš„å•å€™** â†’ ç›´æ¥å‹å¥½å›ç­”
2. **éœ€è¦æ¾„æ¸…** â†’ ç”Ÿæˆæ¾„æ¸…å•é¡Œï¼Œæä¾›é¸é …
3. **ç°¡å–®äº‹å¯¦** â†’ å¾å°è©±æ­·å²æˆ–é€šç”¨çŸ¥è­˜å¿«é€Ÿå›ç­”
4. **æ–‡æª”æœç´¢** â†’ å‘é‡æœç´¢ç›¸é—œæ–‡æª”
5. **æ–‡æª”è©³ç´°æŸ¥è©¢** â­ â†’ å°å·²çŸ¥æ–‡æª”åŸ·è¡Œ MongoDB ç²¾ç¢ºæŸ¥è©¢
6. **è¤‡é›œåˆ†æ** â†’ å®Œæ•´ RAG æµç¨‹ï¼Œå¤šæ–‡æª”æ•´åˆåˆ†æ

### æ™ºèƒ½æ–‡æª”è­˜åˆ¥ç¤ºä¾‹

**æ”¯æ´å¤šç¨®å¼•ç”¨æ–¹å¼ï¼š**
```
ç”¨æˆ¶: "æ–‡æª”äº”çš„è©³ç´°å…§å®¹"
â†’ AI è­˜åˆ¥ï¼šreference_number=5ï¼ŒæŸ¥è©¢æ–‡æª”5

ç”¨æˆ¶: "å—æŠ•çš„ç½°å–®è©³ç´°è³‡è¨Š"  
â†’ AI è­˜åˆ¥ï¼šå¾æ‘˜è¦åŒ¹é…"å—æŠ•"é—œéµè©ï¼ŒæŸ¥è©¢å°æ‡‰æ–‡æª”

ç”¨æˆ¶: "é‚£å¼µç™¼ç¥¨èŠ±äº†å¤šå°‘éŒ¢"
â†’ AI è­˜åˆ¥ï¼šå¾å°è©±æ­·å²æ‰¾åˆ°æåˆ°çš„ç™¼ç¥¨æ–‡æª”
```

### å·¥ä½œæµæ‰¹å‡†æ©Ÿåˆ¶
éœ€è¦åŸ·è¡Œè€—æ™‚æ“ä½œæ™‚ï¼Œç³»çµ±æœƒå…ˆè«‹æ±‚æ‰¹å‡†ï¼š
- ğŸ“ é¡¯ç¤ºå°‡è¦æŸ¥è©¢çš„æ–‡æª”
- â±ï¸ é ä¼°è™•ç†æ™‚é–“
- âœ… ç”¨æˆ¶å¯é¸æ“‡æ‰¹å‡†æˆ–è·³é

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ğŸ“‹ ç’°å¢ƒè¦æ±‚

- Node.js 18+
- Python 3.11+
- MongoDB
- **UV** (æ¨è–¦) - æ¥µé€Ÿ Python åŒ…ç®¡ç†å™¨
- **NVIDIA GPU** (å¯é¸) - ç”¨æ–¼ PyTorch GPU åŠ é€Ÿ

### ğŸ’» æœ¬åœ°é–‹ç™¼

**å‰ç«¯é–‹ç™¼:**
```bash
# é€²å…¥å‰ç«¯ç›®éŒ„
cd frontend

# å®‰è£ä¾è³´
npm install

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
npm start
```

**å¾Œç«¯é–‹ç™¼ (ä½¿ç”¨ UV - æ¨è–¦):**
```bash
# é€²å…¥å¾Œç«¯ç›®éŒ„
cd backend

# å®‰è£ UV (å¦‚æœå°šæœªå®‰è£)
# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
# æˆ–ä½¿ç”¨ pip
pip install uv

# ä½¿ç”¨ UV åŒæ­¥ä¾è³´ (è‡ªå‹•å‰µå»ºè™›æ“¬ç’°å¢ƒä¸¦å®‰è£æ‰€æœ‰ä¾è³´)
uv sync

# è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
cp example.env .env
# ç·¨è¼¯ .env æª”æ¡ˆï¼Œå¡«å…¥æ‚¨çš„é…ç½®

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ (ä½¿ç”¨ UV)
uv run uvicorn app.main:app --reload

# æˆ–ç›´æ¥ä½¿ç”¨è™›æ“¬ç’°å¢ƒ
.venv\\Scripts\\uvicorn.exe app.main:app --reload
```

**å¾Œç«¯é–‹ç™¼ (å‚³çµ±æ–¹å¼):**
```bash
# é€²å…¥å¾Œç«¯ç›®éŒ„
cd backend

# å‰µå»ºè™›æ“¬ç’°å¢ƒ
python -m venv .venv

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
# Windows
.venv\\Scripts\\activate
# Linux/Mac
source .venv/bin/activate

# å®‰è£ä¾è³´
pip install -r requirements.txt

# âš ï¸ é‡è¦ï¼šæ‰‹å‹•å®‰è£ PyTorch GPU ç‰ˆæœ¬
pip uninstall -y torch torchvision torchaudio
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124

# è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
cp example.env .env
# ç·¨è¼¯ .env æª”æ¡ˆï¼Œå¡«å…¥æ‚¨çš„é…ç½®

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
uvicorn app.main:app --reload
```

## ğŸ“ é …ç›®çµæ§‹

```
sortify/
â”œâ”€â”€ frontend/                 # å‰ç«¯é …ç›®
â”‚   â”œâ”€â”€ public/              # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ src/                 # æºä»£ç¢¼
â”‚   â”‚   â”œâ”€â”€ components/      # UI çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/           # é é¢çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/        # èªè­‰é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardPage.tsx    # å„€è¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentsPage.tsx    # æ–‡ä»¶ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ AIQAPage.tsx         # AIå•ç­”
â”‚   â”‚   â”‚   â””â”€â”€ VectorDatabasePage.tsx # å‘é‡æ•¸æ“šåº«ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ services/        # API æœå‹™
â”‚   â”‚   â””â”€â”€ contexts/        # React ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ package.json         # ä¾è³´é…ç½®
â”œâ”€â”€ backend/                 # å¾Œç«¯é …ç›®
â”‚   â”œâ”€â”€ app/                 # æ‡‰ç”¨ç¨‹å¼
â”‚   â”‚   â”œâ”€â”€ apis/           # API è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ v1/         # V1 API ç‰ˆæœ¬
â”‚   â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ models/         # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/       # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â””â”€â”€ main.py         # æ‡‰ç”¨å…¥å£
â”‚   â”œâ”€â”€ tests/              # æ¸¬è©¦æ–‡ä»¶
â”‚   â””â”€â”€ pyproject.toml      # Python é …ç›®é…ç½®
```

## ğŸ”§ é…ç½®èªªæ˜

### åŒ…ç®¡ç†å™¨ - UV

æœ¬é …ç›®ä½¿ç”¨ **UV** ä½œç‚º Python åŒ…ç®¡ç†å™¨ï¼Œç›¸æ¯”å‚³çµ± pipï¼š
- âš¡ **é€Ÿåº¦æå‡ 10-100 å€**
- ğŸ”’ **è‡ªå‹•é–å®šä¾è³´ç‰ˆæœ¬** (uv.lock)
- ğŸ¯ **è‡ªå‹•ç®¡ç†è™›æ“¬ç’°å¢ƒ**
- ğŸš€ **çµ±ä¸€çš„å·¥å…·éˆ** (æ›¿ä»£ pip, poetry, pyenv)

**å¸¸ç”¨å‘½ä»¤:**
```bash
# åŒæ­¥ä¾è³´
uv sync

# æ·»åŠ æ–°åŒ…
uv add package-name

# ç§»é™¤åŒ…
uv remove package-name

# é‹è¡Œå‘½ä»¤
uv run python script.py
uv run pytest tests/ -v
```

### GPU åŠ é€Ÿé…ç½®

æœ¬é …ç›®é»˜èªä½¿ç”¨ **PyTorch GPU ç‰ˆæœ¬ (CUDA 12.4)**ï¼š
- âœ… è‡ªå‹•å¾ PyTorch GPU ç´¢å¼•å®‰è£
- âœ… æ”¯æ´ CUDA 12.x
- âœ… Embedding ç”Ÿæˆé€Ÿåº¦æå‡ **5-10 å€**
- âœ… å‘é‡æœç´¢é€Ÿåº¦æå‡ **3-5 å€**

**é©—è­‰ GPU å¯ç”¨:**
```bash
uv run python -c "import torch; print('GPU:', torch.cuda.is_available())"
```

**é æœŸè¼¸å‡º:** `GPU: True`

### ç’°å¢ƒè®Šæ•¸

**å¾Œç«¯é…ç½®:**
- `MONGODB_URL`: MongoDB é€£æ¥å­—ä¸²
- `DB_NAME`: è³‡æ–™åº«åç¨±
- `OPENAI_API_KEY`: OpenAI API å¯†é‘° (å¯é¸)
- `GEMINI_API_KEY`: Google Gemini API å¯†é‘°

## ğŸ“Š API æ–‡æª”

ç³»çµ±å•Ÿå‹•å¾Œï¼Œæ‚¨å¯ä»¥é€šéä»¥ä¸‹åœ°å€è¨ªå• API æ–‡æª”ï¼š
- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

**ä¸»è¦ API ç«¯é»:**
- `/api/v1/auth/` - ç”¨æˆ¶èªè­‰ï¼ˆç™»å…¥ã€è¨»å†Šã€Token åˆ·æ–°ï¼‰
- `/api/v1/documents/` - æ–‡æª”ç®¡ç†ï¼ˆä¸Šå‚³ã€åˆªé™¤ã€æ›´æ–°ã€æŸ¥è©¢ï¼‰
- `/api/v1/dashboard/` - å„€è¡¨æ¿æ•¸æ“šï¼ˆçµ±è¨ˆã€æ´»å‹•è¨˜éŒ„ï¼‰
- `/api/v1/logs/` - ç³»çµ±æ—¥èªŒæŸ¥è©¢
- `/api/v1/vector-db/` - å‘é‡è³‡æ–™åº«æ“ä½œï¼ˆå‘é‡åŒ–ã€æœç´¢ã€çµ±è¨ˆï¼‰
- `/api/v1/unified-ai/` - çµ±ä¸€ AI æœå‹™ï¼ˆå•ç­”ã€åˆ†æã€æŸ¥è©¢é‡å¯«ï¼‰
- `/api/v1/embedding/` - åµŒå…¥æ¨¡å‹æœå‹™ï¼ˆæ¨¡å‹ç®¡ç†ã€è¨­å‚™é…ç½®ï¼‰
- `/api/v1/clustering/` - æ™ºèƒ½åˆ†é¡ï¼ˆè§¸ç™¼èšé¡ã€æŸ¥è©¢åˆ†é¡ã€åˆªé™¤åˆ†é¡ï¼‰
- `/api/v1/conversations/` - å°è©±ç®¡ç†ï¼ˆå‰µå»ºã€æŸ¥è©¢ã€åˆªé™¤å°è©±ï¼‰
- `/api/v1/settings/` - ç³»çµ±è¨­å®šï¼ˆAI æ¨¡å‹é…ç½®ã€åƒæ•¸èª¿æ•´ï¼‰

## ğŸ§ª æ¸¬è©¦

**å¾Œç«¯æ¸¬è©¦ (ä½¿ç”¨ UV):**
```bash
cd backend
uv run pytest tests/ -v
```

**å¾Œç«¯æ¸¬è©¦ (å‚³çµ±æ–¹å¼):**
```bash
cd backend
.venv\\Scripts\\activate
pytest tests/ -v
```

**è³‡æ–™åº«é€£æ¥æ¸¬è©¦:**
è¨ªå• `http://localhost:8000/test-db-connection` ä¾†æ¸¬è©¦ MongoDB é€£æ¥ç‹€æ…‹ã€‚

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Pull Request å’Œ Issueï¼è«‹ç¢ºä¿æ‚¨çš„ä»£ç¢¼ç¬¦åˆé …ç›®çš„ç·¨ç¢¼æ¨™æº–ã€‚

## ğŸ“„ æˆæ¬Šå”è­°

æœ¬é …ç›®æ¡ç”¨ MIT æˆæ¬Šå”è­°ã€‚è©³è¦‹ LICENSE æ–‡ä»¶ã€‚

## ğŸ“ è¯ç¹«æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹é€šé GitHub Issues è¯ç¹«æˆ‘å€‘ã€‚

---

<a id="english-version"></a>

## ğŸ“– Project Overview

Sortify AI Assistant is a powerful intelligent document analysis and Q&A system based on advanced vector database and large language model technologies. The system can automatically extract and analyze document content, providing intelligent Q&A services based on file content, offering users efficient and accurate document understanding and interaction experiences.

## âœ¨ Key Features

### ğŸ“„ Document Management
- **Multi-format Support**: PDF, Word, Excel, Images, Markdown, and more
- **Intelligent Clustering**: AI automatically analyzes and dynamically generates document categories (can reset and recluster)
- **Batch Operations**: Support for batch upload, delete, and vectorization
- **Gmail Import**: Direct import of emails from Gmail as documents

### ğŸ¤– AI Intelligent Analysis
- **Automatic Text Extraction**: Extract text content from various file formats
- **Structured Analysis**: Extract key information (amounts, dates, names, locations, etc.)
- **Dynamic Field Recognition**: AI automatically identifies document-specific fields
- **Smart Summarization**: Generate accurate document summaries and keywords

### ğŸ’¬ Intelligent Q&A System
- **Intent Classification**: Automatically identify question types (greeting, search, detail query, complex analysis, etc.)
- **Conversation Memory**: Support multi-turn dialogue, remember context and queried documents
- **MongoDB Detail Query**: Execute precise data extraction for known documents
- **Smart Document Identification**:
  - Number references ("document five", "3rd document")
  - Content matching ("Nantou ticket", "2024 invoice")
  - Conversation references ("that invoice", "this contract")
- **Workflow Approval**: Request user approval when search or detail query is needed

### ğŸ” Vector Search
- **Hybrid Retrieval**: RRF fusion search combining summary and chunk vectors
- **Smart Triggering**: Automatically decide if query rewrite is needed based on similarity scores
- **Query Optimization**: AI automatically rewrites queries to improve retrieval accuracy
- **Semantic Understanding**: Support natural language queries and concept matching

### ğŸ“Š Data Visualization
- **Dashboard**: System status, document statistics, activity logs
- **Q&A Analytics**: View AI processing steps, vector search results, context data
- **Clustering Statistics**: Category distribution, document counts, coverage rates

### ğŸ” Security & Permissions
- **User Authentication**: JWT Token authentication
- **Document Isolation**: Users can only access their own documents
- **Security Logging**: Record all operations and errors

## ğŸ—ï¸ System Architecture

**Tech Stack:**

| Component  | Technology                                     | Description                        |
| ---------- | ---------------------------------------------- | ---------------------------------- |
| Frontend   | React.js + TypeScript + Ant Design + TailwindCSS | Modern responsive UI               |
| Backend    | FastAPI + UV (Python)                          | High-performance async API service |
| Database   | MongoDB + ChromaDB                             | Document storage + Vector search   |
| AI Service | Google Gemini / OpenAI API                     | LLM integration                    |

"Here is our system's architecture diagram:"

![System Architecture Diagram](images/SystemArchitecture.jpg)

## ğŸ¯ Intelligent Q&A System Highlights

### Smart Intent Recognition
The system automatically identifies 7 question types and applies optimal strategies:

1. **Greeting** â†’ Direct friendly response
2. **Clarification Needed** â†’ Generate clarification questions with options
3. **Simple Factual** â†’ Quick answer from conversation history or general knowledge
4. **Document Search** â†’ Vector search for relevant documents
5. **Document Detail Query** â­ â†’ Execute precise MongoDB query on known documents
6. **Complex Analysis** â†’ Full RAG process with multi-document integration

### Smart Document Identification Examples

**Supports multiple reference methods:**
```
User: "Detail content of document five"
â†’ AI identifies: reference_number=5, queries document 5

User: "Detailed info about Nantou traffic ticket"  
â†’ AI identifies: Matches "Nantou" keyword from summary, queries corresponding document

User: "How much did that invoice cost"
â†’ AI identifies: Finds invoice document mentioned in conversation history
```

### Workflow Approval Mechanism
When time-consuming operations are needed, the system requests approval:
- ğŸ“ Shows documents to be queried
- â±ï¸ Estimates processing time
- âœ… Users can approve or skip

## ğŸš€ Quick Start

### ğŸ“‹ Prerequisites

- Node.js 18+
- Python 3.11+
- MongoDB
- **UV** (Recommended) - Ultra-fast Python package manager
- **NVIDIA GPU** (Optional) - For PyTorch GPU acceleration

### ğŸ’» Local Development

**Frontend Development:**
```bash
# Enter frontend directory
cd frontend

# Install dependencies
npm install

# Start development server
npm start
```

**Backend Development (Using UV - Recommended):**
```bash
# Enter backend directory
cd backend

# Install UV (if not already installed)
# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
# Or using pip
pip install uv

# Sync dependencies using UV (auto-creates venv and installs all deps)
uv sync

# Copy environment variable template
cp example.env .env
# Edit .env file and fill in your configuration

# Start development server (using UV)
uv run uvicorn app.main:app --reload

# Or use virtual environment directly
.venv\\Scripts\\uvicorn.exe app.main:app --reload
```

**Backend Development (Traditional Way):**
```bash
# Enter backend directory
cd backend

# Create virtual environment
python -m venv .venv

# Activate virtual environment
# Windows
.venv\\Scripts\\activate
# Linux/Mac
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# âš ï¸ Important: Manually install PyTorch GPU version
pip uninstall -y torch torchvision torchaudio
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124

# Copy environment variable template
cp example.env .env
# Edit .env file and fill in your configuration

# Start development server
uvicorn app.main:app --reload
```

## ğŸ“ Project Structure

```
sortify/
â”œâ”€â”€ frontend/                 # Frontend project
â”‚   â”œâ”€â”€ public/              # Static assets
â”‚   â”œâ”€â”€ src/                 # Source code
â”‚   â”‚   â”œâ”€â”€ components/      # UI components
â”‚   â”‚   â”œâ”€â”€ pages/           # Page components
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/        # Authentication pages
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardPage.tsx    # Dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentsPage.tsx    # Document management
â”‚   â”‚   â”‚   â”œâ”€â”€ AIQAPage.tsx         # AI Q&A
â”‚   â”‚   â”‚   â””â”€â”€ VectorDatabasePage.tsx # Vector DB management
â”‚   â”‚   â”œâ”€â”€ services/        # API services
â”‚   â”‚   â””â”€â”€ contexts/        # React contexts
â”‚   â”œâ”€â”€ package.json         # Dependencies
â”œâ”€â”€ backend/                 # Backend project
â”‚   â”œâ”€â”€ app/                 # Application
â”‚   â”‚   â”œâ”€â”€ apis/           # API routes
â”‚   â”‚   â”‚   â””â”€â”€ v1/         # V1 API version
â”‚   â”‚   â”œâ”€â”€ core/           # Core functionality
â”‚   â”‚   â”œâ”€â”€ models/         # Data models
â”‚   â”‚   â”œâ”€â”€ services/       # Business logic
â”‚   â”‚   â””â”€â”€ main.py         # Application entry point
â”‚   â”œâ”€â”€ tests/              # Test files
â”‚   â””â”€â”€ pyproject.toml      # Python project config
```

## ğŸ”§ Configuration

### Package Manager - UV

This project uses **UV** as the Python package manager, compared to traditional pip:
- âš¡ **10-100x faster**
- ğŸ”’ **Automatic dependency locking** (uv.lock)
- ğŸ¯ **Auto-managed virtual environments**
- ğŸš€ **Unified toolchain** (replaces pip, poetry, pyenv)

**Common Commands:**
```bash
# Sync dependencies
uv sync

# Add new package
uv add package-name

# Remove package
uv remove package-name

# Run commands
uv run python script.py
uv run pytest tests/ -v
```

### GPU Acceleration

This project uses **PyTorch GPU version (CUDA 12.4)** by default:
- âœ… Auto-installs from PyTorch GPU index
- âœ… Supports CUDA 12.x
- âœ… Embedding generation **5-10x faster**
- âœ… Vector search **3-5x faster**

**Verify GPU availability:**
```bash
uv run python -c "import torch; print('GPU:', torch.cuda.is_available())"
```

**Expected output:** `GPU: True`

### Environment Variables

**Backend Configuration:**
- `MONGODB_URL`: MongoDB connection string
- `DB_NAME`: Database name
- `OPENAI_API_KEY`: OpenAI API key (optional)
- `GEMINI_API_KEY`: Google Gemini API key

## ğŸ“Š API Documentation

After starting the system, you can access the API documentation at:
- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

**Main API Endpoints:**
- `/api/v1/auth/` - User authentication (login, register, token refresh)
- `/api/v1/documents/` - Document management (upload, delete, update, query)
- `/api/v1/dashboard/` - Dashboard data (statistics, activity logs)
- `/api/v1/logs/` - System log queries
- `/api/v1/vector-db/` - Vector database operations (vectorization, search, statistics)
- `/api/v1/unified-ai/` - Unified AI services (Q&A, analysis, query rewriting)
- `/api/v1/embedding/` - Embedding model services (model management, device configuration)
- `/api/v1/clustering/` - Intelligent clustering (trigger clustering, query clusters, delete clusters)
- `/api/v1/conversations/` - Conversation management (create, query, delete conversations)
- `/api/v1/settings/` - System settings (AI model configuration, parameter tuning)

## ğŸ§ª Testing

**Backend Testing (Using UV):**
```bash
cd backend
uv run pytest tests/ -v
```

**Backend Testing (Traditional):**
```bash
cd backend
.venv\\Scripts\\activate
pytest tests/ -v
```

**Database Connection Test:**
Visit `http://localhost:8000/test-db-connection` to test MongoDB connection status.

## ğŸ¤ Contributing

Welcome to submit Pull Requests and Issues! Please ensure your code follows the project\'s coding standards.

## ğŸ“„ License

This project is licensed under the MIT License. See the LICENSE file for details.

## ğŸ“ Contact

For questions or suggestions, please contact us through GitHub Issues.

---
